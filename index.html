<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CIA Missions</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a1a;
            color: #d4d4d4;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
            overflow: hidden;
            flex-direction: column;
        }

        .container {
            position: absolute;
            top: 2rem;
            left: 2rem;
            display: flex;
            align-items: center;
            padding: 0;
            text-align: left;
            flex-direction: row;
        }
        
        .main-content {
            position: relative;
            z-index: 10;
        }
        
        .nav-link {
            padding: 0.5rem 1rem;
            color: #d4d4d4;
            text-decoration: none;
            transition: color 0.3s;
            cursor: pointer;
        }

        .nav-link:hover {
            color: #fff;
        }

        .logo {
            width: 50px;
            height: 50px;
            margin-right: 1rem;
        }
        
        .logo svg {
            width: 100%;
            height: 100%;
        }

        .header-content {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        h1 {
            font-size: 1.25rem;
            font-weight: 700;
            color: #e0e0e0;
            margin: 0;
            letter-spacing: 0.05em;
        }

        p {
            font-size: 0.75rem;
            font-weight: 400;
            line-height: 1.6;
            color: #a0a0a0;
            margin-top: 0.25rem;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-300">

    <!-- Navigation -->
    <nav class="absolute top-0 right-0 p-4">
        <a class="nav-link" onclick="showPage('mission1')">Question 1</a>
        <a class="nav-link" onclick="showPage('mission2')">Mission 2</a>
        <a class="nav-link" onclick="showPage('mission3')">Mission 3</a>
    </nav>

    <div class="container">
        <div class="logo">
            <!-- Simplified CIA Seal SVG -->
            <svg xmlns="svg image logo.svg" viewBox="0 0 100 100">
                <!-- Outer circle -->
                <circle cx="50" cy="50" r="48" stroke="#ffffff" stroke-width="2" fill="transparent"/>
                <!-- Compass Rose with 16 points -->
                <polygon points="50,5 56,23 75,23 59,33 65,50 56,67 75,77 56,77 50,95 44,77 25,77 41,67 35,50 44,33 25,23 44,23" fill="#ffffff"/>
                <!-- Eagle head -->
                <path d="M50,42 c10,-2 15,-12 12,-18 c-3,-6 -12,-5 -22,-2 c-10,3 -15,12 -12,18 c3,6 12,5 22,2 z" fill="#1a1a1a" stroke="#ffffff" stroke-width="0.5" />
                <!-- Shield shape -->
                <path d="M50,55 L75,50 L75,75 L50,85 L25,75 L25,50 Z" fill="#ffffff" stroke="#ffffff" stroke-width="0.5"/>
            </svg>
        </div>
        <div class="header-content">
            <h1>
                CIA
            </h1>
            <p>
                We are the Nation's first line of defense.
            </p>
        </div>
    </div>

    <!-- Page Content -->
    <div id="mission1" class="page active">
        <div class="main-content">
             <style>
                @import url("https://fonts.googleapis.com/css2?family=Space+Mono&display=swap");

                html,
                body {
                  margin: 0;
                  padding: 0;
                }

                body::before {
                    content: '';
                    background-color: #000;
                    background-image: url("https://assets.codepen.io/37111/cat-eyes.jpg");
                    background-size: contain;
                    background-position: center;
                    background-repeat: no-repeat;
                    position: absolute;
                    inset: 0;
                    filter: brightness(50%);
                    pointer-events: none; /* don't block pointer tracking */
                }

                .text-block {
                    margin: 10vh auto; /* center horizontally */
                    padding: 0 5vw;   /* side padding for small screens */
                    max-width: 800px;
                    font-family: "Space Mono", monospace;
                    font-weight: 400;
                    font-style: normal;
                    font-size: clamp(16px, 3.2vw, 30px); /* smaller to avoid oversized scramble */
                    color: #fff;
                    text-shadow: 1px 1px 2px #000;
                    position: relative;
                    z-index: 10;
                    text-align: center;         /* center the text */
                    overflow-wrap: normal;      /* keep horizontal flow */
                    word-break: normal;         /* avoid per-char vertical stacking */
                }
                /* Ensure paragraph uses the container font size instead of global small p size */
                #mission1 .text-block p { font-size: inherit; line-height: 1.5; margin: 0.4em 0; }
                #mission1 .text-block h3 { margin: 0 0 0.4em; font-weight: 700; }
                #mission1 .text-block ul, 
                #mission1 .text-block ol { 
                    text-align: left;           /* lists read better left-aligned */
                    margin: 0.5em auto; 
                    padding-left: 1.2em; 
                    max-width: 36ch;           /* avoid overly long lines */
                }
                #mission1 .text-block li { margin: 0.2em 0; }
            </style>
            <div class="text-block">
                <div id="riddle">
                    <h3>The Riddle of Six</h3>
                    <p>A voice hides a message.<br/>The key lies only in these fragments of time:</p>
                    <ul>
                        <li><code>17.96 → 18.95</code> (harvest 3)</li>
                        <li><code>1.23.95 → 1.24.5</code> (harvest 1)</li>
                        <li><code>01.00.99 → 01.01.30</code> (harvest 1)</li>
                        <li><code>0.51.09 → 0.51.75</code> (harvest 1)</li>
                    </ul>
                    <h3>Instructions, whispered:</h3>
                    <ol>
                        <li>Catch the sounds that live between the marks.</li>
                        <li>Strip away all space and clutter.</li>
                        <li>Gather only the number of letters demanded.</li>
                        <li>Bind them in the given order.</li>
                        <li>Break the chain into six clear words.</li>
                    </ol>
                    <p><strong>Answer sought:</strong> A single <strong>six-word sentence</strong> that reveals itself only to those who listen carefully.</p>
                </div>
            </div>
        </div>
    </div>

    <div id="mission2" class="page">
        <div class="main-content">
            <h2 class="text-4xl font-semibold mb-4 text-white">Mission 2: Covert Action</h2>
            <p class="text-lg max-w-2xl">
                When directed by the President, the CIA conducts covert action to influence political, economic, or military conditions abroad. These activities are carried out in a manner that protects the identities of those involved and the secrets of the operation.
            </p>
        </div>
    </div>

    <div id="mission3" class="page">
        <div class="main-content">
            <h2 class="text-4xl font-semibold mb-4 text-white">Mission 3: Global Partnerships</h2>
            <p class="text-lg max-w-2xl">
                The CIA works in close collaboration with our foreign intelligence and security services to combat global threats, including terrorism, narcotics trafficking, and weapons proliferation. These international partnerships are critical to advancing our shared national security objectives.
            </p>
        </div>
    </div>

        <script>
                // Lightweight scramble effect without GSAP bonus plugins (SplitText/ScrambleText)
                const textRevealPercent = 0.17; // portion of viewport width used as reveal radius
                let textRevealRadius = 100;

                const letters = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
                const getRandomLetter = () => letters[Math.floor(Math.random() * letters.length)];

                let pageX = 0, pageY = 0;
                let scrollY = window.pageYOffset, scrollX = window.pageXOffset;

                let charSpans = [];
                let charData = [];

                function splitTextIntoChars() {
                        const container = document.querySelector('#mission1 .text-block #riddle');
                        if (!container) return;
                        if (container.dataset.split === 'true') {
                                charSpans = Array.from(container.querySelectorAll('span[data-split="1"]'));
                                return;
                        }
                        // Walk the DOM and split only text nodes into span-wrapped characters
                        const walker = document.createTreeWalker(container, NodeFilter.SHOW_TEXT, {
                            acceptNode(node) {
                                // ignore empty/whitespace-only nodes
                                if (!node.nodeValue || !node.nodeValue.trim()) return NodeFilter.FILTER_REJECT;
                                return NodeFilter.FILTER_ACCEPT;
                            }
                        });
                        const textNodes = [];
                        while (walker.nextNode()) textNodes.push(walker.currentNode);

                        textNodes.forEach(node => {
                            const parent = node.parentNode;
                            const frag = document.createDocumentFragment();
                            for (const ch of node.nodeValue) {
                                const span = document.createElement('span');
                                span.textContent = ch; // keep normal spaces for wrapping
                                span.dataset.orig = ch;
                                span.setAttribute('data-split', '1');
                                frag.appendChild(span);
                            }
                            parent.replaceChild(frag, node);
                        });
                        container.dataset.split = 'true';
                        charSpans = Array.from(container.querySelectorAll('span[data-split="1"]'));
                }

                function updateCharData() {
                        scrollY = window.pageYOffset;
                        scrollX = window.pageXOffset;
                        charData = charSpans.map(el => {
                                const b = el.getBoundingClientRect();
                                return {
                                        el,
                                        pageY: b.top + scrollY + b.height / 2,
                                        pageX: b.left + scrollX + b.width / 2,
                                        isVisible: false,
                                        orig: el.dataset.orig || el.textContent
                                };
                        });
                }

                function handleResize() {
                        textRevealRadius = window.innerWidth * textRevealPercent;
                        updateCharData();
                }

                function updateOnInput(e) {
                        const mission1Active = document.getElementById('mission1')?.classList.contains('active');
                        if (!mission1Active || !charData.length) return;

                        if ("pageY" in e) {
                                pageX = e.pageX;
                                pageY = e.pageY;
                        } else {
                                // update based on scroll delta
                                const dy = window.pageYOffset - scrollY;
                                const dx = window.pageXOffset - scrollX;
                                scrollY += dy;
                                scrollX += dx;
                                pageY += dy;
                                pageX += dx;
                        }

                        for (const d of charData) {
                                const dx = pageX - d.pageX;
                                const dy = pageY - d.pageY;
                                const dist = Math.hypot(dx, dy);
                                const visible = dist < textRevealRadius;
                                if (visible !== d.isVisible || !visible) {
                                    d.isVisible = visible;
                                    d.el.textContent = visible ? d.orig : getRandomLetter();
                                }
                        }
                }

                function initMission1() {
                        splitTextIntoChars();
                        handleResize();
                        window.addEventListener('resize', handleResize);
                        window.addEventListener('pointermove', updateOnInput, { passive: true });
                        window.addEventListener('scroll', updateOnInput, { passive: true });
                        updateOnInput({ pageX: 0, pageY: 0 });
                }

                function teardown() {
                        window.removeEventListener('resize', handleResize);
                        window.removeEventListener('pointermove', updateOnInput);
                        window.removeEventListener('scroll', updateOnInput);
                }

                function showPage(pageId) {
                        document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                        document.getElementById(pageId)?.classList.add('active');
                        teardown();
                        if (pageId === 'mission1') initMission1();
                }

                document.addEventListener('DOMContentLoaded', () => {
                        showPage('mission1');
                });
        </script>
</body>
</html>